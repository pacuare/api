amends "package://github.com/jdx/hk/releases/download/v1.29.0/hk@1.29.0#/Config.pkl"
import "https://pkl.farthergate.com/hk/Ty.pkl"
import "package://github.com/jdx/hk/releases/download/v1.29.0/hk@1.29.0#/Builtins.pkl"

local linters = new Mapping<String, Step> {
  // uses builtin ruff linter config
  ["ruff"] = Builtins.ruff
  ["ty"] = Ty.ty
  ["yq"] = Builtins.yq

  // define a custom linter
  ["pkl"] {
    glob = "*.pkl"
    check = "pkl eval {{files}} >/dev/null"
  }
}

hooks {
  ["pre-commit"] {
    fix = true // automatically modify files with available linter fixes
    stash = "git" // stashes unstaged changes while running fix steps
    steps = linters
  }
  // instead of pre-commit, you can instead define pre-push hooks
  ["pre-push"] {
    steps = linters
  }
  // "fix" and "check" are special steps for `hk fix` and `hk check` commands
  ["fix"] {
    fix = true
    steps = linters
  }
  ["check"] {
    steps = linters
  }
}
